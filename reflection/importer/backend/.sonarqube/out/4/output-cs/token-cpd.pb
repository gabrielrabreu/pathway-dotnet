•
fC:\Desenvolvimento\Repos\dotnet-generic-importer\backend\src\Core.Infra.Data\Contexts\BaseDbContext.cs
	namespace 	
Core
 
. 
Infra 
. 
Data 
. 
Contexts "
{ 
public 

abstract 
class 
BaseDbContext '
:( )
	DbContext* 3
,3 4

IDbContext5 ?
{ 
	protected 
BaseDbContext 
(  
DbContextOptions  0
options1 8
)8 9
:: ;
base< @
(@ A
optionsA H
)H I
{J K
}L M
public

 
async

 
Task

 
<

 
bool

 
>

 
Commit

  &
(

& '
)

' (
{ 	
return 
await 
SaveChangesAsync )
() *
)* +
>, -
$num. /
;/ 0
} 	
} 
} †
cC:\Desenvolvimento\Repos\dotnet-generic-importer\backend\src\Core.Infra.Data\Contexts\IDbContext.cs
	namespace 	
Core
 
. 
Infra 
. 
Data 
. 
Contexts "
{ 
public 

	interface 

IDbContext 
:  !
IUnitOfWork" -
{ 
DbSet 
< 
T 
> 
Set 
< 
T 
> 
( 
) 
where 
T  !
:" #
class$ )
;) *
}		 
}

 Á&
gC:\Desenvolvimento\Repos\dotnet-generic-importer\backend\src\Core.Infra.Data\Repositories\Repository.cs
	namespace 	
Core
 
. 
Infra 
. 
Data 
. 
Repositories &
{ 
public 

abstract 
class 

Repository $
<$ %
TEntity% ,
>, -
:. /
IRepository0 ;
<; <
TEntity< C
>C D
whereE J
TEntityK R
:S T
EntityU [
{ 
private 
readonly 
BaseDbContext &
_baseDbContext' 5
;5 6
private 
readonly 
DbSet 
< 
TEntity &
>& '
_dbSet( .
;. /
	protected 

Repository 
( 
BaseDbContext *
baseDbContext+ 8
)8 9
{ 	
_baseDbContext 
= 
baseDbContext *
;* +
_dbSet 
= 
baseDbContext "
." #
Set# &
<& '
TEntity' .
>. /
(/ 0
)0 1
;1 2
} 	
public 
IUnitOfWork 

UnitOfWork %
=>& (
_baseDbContext) 7
;7 8
private 

IQueryable 
< 
TEntity "
>" #
	BaseQuery$ -
(- .
). /
{ 	
return 
_dbSet 
; 
} 	
	protected 
virtual 

IQueryable $
<$ %
TEntity% ,
>, -
ImproveQuery. :
(: ;

IQueryable; E
<E F
TEntityF M
>M N
queryO T
)T U
{   	
return!! 
query!! 
;!! 
}"" 	
public$$ 
virtual$$ 

IQueryable$$ !
<$$! "
TEntity$$" )
>$$) *
Query$$+ 0
($$0 1
)$$1 2
{%% 	
return&& 
ImproveQuery&& 
(&&  
	BaseQuery&&  )
(&&) *
)&&* +
)&&+ ,
;&&, -
}'' 	
public)) 
virtual)) 
async)) 
Task)) !
<))! "
IEnumerable))" -
<))- .
TEntity)). 5
>))5 6
>))6 7
Search))8 >
())> ?

Expression))? I
<))I J
Func))J N
<))N O
TEntity))O V
,))V W
bool))X \
>))\ ]
>))] ^
	predicate))_ h
)))h i
{** 	
return++ 
await++ 
Query++ 
(++ 
)++  
.++  !
Where++! &
(++& '
	predicate++' 0
)++0 1
.++1 2
ToListAsync++2 =
(++= >
)++> ?
;++? @
},, 	
public.. 
virtual.. 
async.. 
Task.. !
<..! "
IEnumerable.." -
<..- .
TEntity... 5
>..5 6
>..6 7
GetAll..8 >
(..> ?
)..? @
{// 	
return00 
await00 
Query00 
(00 
)00  
.00  !
ToListAsync00! ,
(00, -
)00- .
;00. /
}11 	
public33 
virtual33 
async33 
Task33 !
<33! "
TEntity33" )
>33) *
GetById33+ 2
(332 3
Guid333 7
id338 :
)33: ;
{44 	
return55 
await55 
Query55 
(55 
)55  
.55  !
FirstOrDefaultAsync55! 4
(554 5
x555 6
=>557 9
x55: ;
.55; <
Id55< >
==55? A
id55B D
)55D E
;55E F
}66 	
public88 
virtual88 
void88 
Add88 
(88  
TEntity88  '
entity88( .
)88. /
{99 	
_dbSet:: 
.:: 
Add:: 
(:: 
entity:: 
):: 
;:: 
};; 	
public== 
virtual== 
void== 
Update== "
(==" #
TEntity==# *
entity==+ 1
)==1 2
{>> 	
_dbSet?? 
.?? 
Update?? 
(?? 
entity??  
)??  !
;??! "
}@@ 	
publicBB 
virtualBB 
voidBB 
RemoveBB "
(BB" #
TEntityBB# *
entityBB+ 1
)BB1 2
{CC 	
_dbSetDD 
.DD 
RemoveDD 
(DD 
entityDD  
)DD  !
;DD! "
}EE 	
}FF 
}GG 